window.onload=function(){const e=document.getElementById("date"),t=new Date;e.innerHTML=t.toLocaleDateString("ru-RU",{weekday:"long",month:"long",day:"numeric"});for(var n=document.querySelectorAll("#toggle"),d=0;d<n.length;d++)n[d].onclick=function(){this.classList.contains("toggle-on")?(this.classList.remove("toggle-on"),this.classList.add("toggle-off"),this.parentElement.nextElementSibling.classList.add("hidden")):(this.classList.remove("toggle-off"),this.classList.add("toggle-on"),this.parentElement.nextElementSibling.classList.remove("hidden"))};var i=localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")):{CURRENT:[],COMPLETE:[]};function o(e){s(e),document.getElementById("new-task").value="",i.CURRENT.push(e),r(),c()}function l(){if(confirm("Удалить данную задачу?")){let e=this.parentNode,t=e.parentNode,n=e.parentNode.id,d=e.firstChild.innerText;"current"===n?i.CURRENT.splice(i.CURRENT.indexOf(d),1):i.COMPLETE.splice(i.COMPLETE.indexOf(d),1),r(),t.removeChild(e),c()}}function a(){var e,t=this.parentNode,n=t.parentNode,d=t.parentNode.id,o=t.firstChild.innerText;"current"===d?(i.CURRENT.splice(i.CURRENT.indexOf(o),1),i.COMPLETE.push(o)):(i.COMPLETE.splice(i.COMPLETE.indexOf(o),1),i.CURRENT.push(o)),r(),n.removeChild(t),"current"===d?(e=document.getElementById("complete"),t.classList.add("check"),t.firstChild.classList.add("lineThrough"),t.lastChild.innerHTML="&#8634"):(e=document.getElementById("current"),t.classList.remove("check"),t.firstChild.classList.remove("lineThrough"),t.lastChild.innerHTML="&#10004"),e.insertBefore(t,e.childNodes[0]),c()}function s(e,t){var n,d,i,o,s;t?(n=document.getElementById("complete"),(d=document.createElement("li")).classList.add("todo__item","check"),(i=document.createElement("p")).classList.add("todo__text","lineThrough"),i.innerText=e,(o=document.createElement("span")).classList.add("todo__btn","todo__btn-remove"),o.innerHTML="&#10008",o.addEventListener("click",l),(s=document.createElement("span")).classList.add("todo__btn","todo__btn-check"),s.innerHTML="&#8634",s.addEventListener("click",a)):(n=document.getElementById("current"),(d=document.createElement("li")).classList.add("todo__item"),(i=document.createElement("p")).classList.add("todo__text"),i.innerText=e,(o=document.createElement("span")).classList.add("todo__btn","todo__btn-remove"),o.innerHTML="&#10008",o.addEventListener("click",l),(s=document.createElement("span")).classList.add("todo__btn","todo__btn-check"),s.innerHTML="&#10004",s.addEventListener("click",a)),d.appendChild(i),d.appendChild(o),d.appendChild(s),n.appendChild(d)}function c(){for(var e,t,n=0;n<i.CURRENT.length;n++)e=i.CURRENT.length;for(n=0;n<i.COMPLETE.length;n++)t=i.COMPLETE.length;document.getElementById("current-tasks").innerText=e||"0",document.getElementById("complete-tasks").innerText=t||"0"}function r(){localStorage.setItem("data",JSON.stringify(i))}!function(){if(!i.CURRENT.length&&!i.COMPLETE.length)return;for(var e=0;e<i.CURRENT.length;e++){var t=i.CURRENT[e];s(t),document.getElementById("current-tasks").innerText=i.CURRENT.length}for(var n=0;n<i.COMPLETE.length;n++){var t=i.COMPLETE[n];s(t,!0),document.getElementById("complete-tasks").innerText=i.COMPLETE.length}}(),document.getElementById("add-task").addEventListener("click",function(){var e=document.getElementById("new-task").value;if(!e)return alert("Введите название задачи!"),!1;o(e)}),document.addEventListener("keypress",function(e){var t=document.getElementById("new-task").value;if(13===e.keyCode){if(!t)return alert("Введите название задачи!"),!1;o(t)}})};